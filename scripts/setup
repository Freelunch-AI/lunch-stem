#!/bin/bash

# Run this script in linux shell to set up the environment for using lunch.sh CLI.
# It adds the script directory to the PATH for the current session and provides instructions for making it

# Usage:
# .\setup.sh

# Get the directory where this setup script is located
scriptDir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Add lunch script to PATH for easy access
export PATH="$scriptDir:$PATH"

# Make the lunch script executable (if it exists)
if [ -f "$scriptDir/lunch" ]; then
    chmod +x "$scriptDir/lunch"
    echo "Made lunch executable"
fi

# Check if the script directory is already in PATH permanently
if ! grep -q "$scriptDir" ~/.bashrc 2>/dev/null; then
    echo "To make this PATH change permanent, add the following line to your ~/.bashrc:"
    echo "export PATH=\"$scriptDir:\$PATH\""
    echo ""
    echo "Or run: echo 'export PATH=\"$scriptDir:\$PATH\"' >> ~/.bashrc"
else
    echo "Script directory already found in ~/.bashrc"
fi

# Configure rclone
export RCLONE_CONFIG="$scriptDir/../config/rclone.conf"
export RCLONE_SA="$scriptDir/../lunch-stem-fadf503639fe.json"

echo "Setup complete! Script directory added to PATH: $scriptDir"
echo "You can now run 'lunch' from anywhere in this session just by typing lunch"
echo "Configured rclone with config file at $RCLONE_CONFIG and service account at $RCLONE_SA"